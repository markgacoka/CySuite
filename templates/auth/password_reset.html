{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Reset Password | CySuite</title>
    <link rel="icon" href="{% static 'img/icons/favicon.ico' %}" type="image/x-icon" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="{% static 'css/alert.css' %}" rel="stylesheet">
    <link href="{% static 'css/auth.css' %}" rel="stylesheet">
    <script src="{% static 'js/app.js' %}"></script>
</head>
<body data-theme="default" data-layout="fluid" data-sidebar-position="left" data-sidebar-behavior="sticky">
    <div class="main d-flex justify-content-center w-100">
        <main class="content d-flex p-0">
            <div class="container d-flex flex-column">
                <center><a href="/"><img src="{% static 'img/icons/cysuite.png' %}" style="width: 15rem; height: auto; padding-top: 3rem;"></a></center>
                <div class="row h-100" style="padding: 3rem 1rem 0 1rem;">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto d-table h-100">
                        <div class="d-table-cell align-middle">
                            <div class="text-center mt-4">
                                <h1 class="h2">Reset password</h1>
                                <p class="lead">
                                    Enter your email to reset your password.
                                </p>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <div class="m-sm-4">
                                        <form method="post" id="change-password-form">
                                            {% csrf_token %}
                                            {% if validlink %}
                                                {% if form.errors %}
                                                    {% for field in form %}
                                                        {% for error in field.errors %}
                                                        <div class="alert alert-danger alert-dismissible" role="alert">
                                                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                                            <div class="alert-message">
                                                                <strong>{{error}}</strong>
                                                            </div>
                                                        </div>
                                                        {% endfor %}
                                                    {% endfor %}
                                                {% endif %}
                                                <div class="mb-3">
                                                    <label class="form-label" for="id_new_password1">New Password</label>
                                                    <input class="form-control form-control-lg"  name="new_password1" placeholder="New password" type="password" id="id_new_password1" required="true">
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label" for="id_new_password2">Confirm Password</label>
                                                    <input class="form-control form-control-lg" name="new_password2" placeholder="Confirm password" type="password" id="id_new_password2" required="true">
                                                </div>
                                                <div class="text-center mt-3">
                                                    <button type="submit" class="btn btn-lg btn-primary">Reset password</button>
                                                </div>
                                            {% else %}
                                                <h4>Password reset unsuccessful</h4>
                                                <p>The password reset link was invalid, 
                                                possibly because it has already been used.
                                                Please request a new password reset.</p><br/>
                                            {% endif %}
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>